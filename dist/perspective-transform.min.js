/*! perspective-transform - v1.1.3 - 25-01-2022 */
!function(a){if(!a.numeric){var b={};b.dim=function(a){var c,d;return"object"==typeof a?(c=a[0],"object"==typeof c?(d=c[0],"object"==typeof d?b._dim(a):[a.length,c.length]):[a.length]):[]},b._foreach2=function a(b,c,d,e){if(d===c.length-1)return e(b);var f,g=c[d],h=Array(g);for(f=g-1;f>=0;f--)h[f]=a(b[f],c,d+1,e);return h},b.cloneV=function(a){var b,c=a.length,d=Array(c);for(b=c-1;-1!==b;--b)d[b]=a[b];return d},b.clone=function(a){if("object"!=typeof a)return a;var c=b.cloneV,d=b.dim(a);return b._foreach2(a,d,0,c)},b.diag=function(a){var b,c,d,e,f=a.length,g=Array(f);for(b=f-1;b>=0;b--){for(e=Array(f),c=b+2,d=f-1;d>=c;d-=2)e[d]=0,e[d-1]=0;for(d>b&&(e[d]=0),e[b]=a[b],d=b-1;d>=1;d-=2)e[d]=0,e[d-1]=0;0===d&&(e[0]=0),g[b]=e}return g},b.rep=function(a,c,d){void 0===d&&(d=0);var e,f=a[d],g=Array(f);if(d===a.length-1){for(e=f-2;e>=0;e-=2)g[e+1]=c,g[e]=c;return-1===e&&(g[0]=c),g}for(e=f-1;e>=0;e--)g[e]=b.rep(a,c,d+1);return g},b.identity=function(a){return b.diag(b.rep([a],1))},b.inv=function(a){var c,d,e,f,g,h,i,j,k=b.dim(a),l=Math.abs,m=k[0],n=k[1],o=b.clone(a),p=b.identity(m);for(h=0;h<n;++h){var q=-1,r=-1;for(g=h;g!==m;++g)(i=l(o[g][h]))>r&&(q=g,r=i);for(d=o[q],o[q]=o[h],o[h]=d,f=p[q],p[q]=p[h],p[h]=f,j=d[h],i=h;i!==n;++i)d[i]/=j;for(i=n-1;-1!==i;--i)f[i]/=j;for(g=m-1;-1!==g;--g)if(g!==h){for(c=o[g],e=p[g],j=c[h],i=h+1;i!==n;++i)c[i]-=d[i]*j;for(i=n-1;i>0;--i)e[i]-=f[i]*j,--i,e[i]-=f[i]*j;0===i&&(e[0]-=f[0]*j)}}return p},b.dotMMsmall=function(a,b){var c,d,e,f,g,h,i,j,k,l,m;for(f=a.length,g=b.length,h=b[0].length,i=Array(f),c=f-1;c>=0;c--){for(j=Array(h),k=a[c],e=h-1;e>=0;e--){for(l=k[g-1]*b[g-1][e],d=g-2;d>=1;d-=2)m=d-1,l+=k[d]*b[d][e]+k[m]*b[m][e];0===d&&(l+=k[0]*b[0][e]),j[e]=l}i[c]=j}return i},b.dotMV=function(a,c){var d,e=a.length,f=Array(e),g=b.dotVV;for(d=e-1;d>=0;d--)f[d]=g(a[d],c);return f},b.dotVV=function(a,b){var c,d,e=a.length,f=a[e-1]*b[e-1];for(c=e-2;c>=1;c-=2)d=c-1,f+=a[c]*b[c]+a[d]*b[d];return 0===c&&(f+=a[0]*b[0]),f},b.transpose=function(a){var b,c,d,e,f,g=a.length,h=a[0].length,i=Array(h);for(c=0;c<h;c++)i[c]=Array(g);for(b=g-1;b>=1;b-=2){for(e=a[b],d=a[b-1],c=h-1;c>=1;--c)f=i[c],f[b]=e[c],f[b-1]=d[c],--c,f=i[c],f[b]=e[c],f[b-1]=d[c];0===c&&(f=i[0],f[b]=e[0],f[b-1]=d[0])}if(0===b){for(d=a[0],c=h-1;c>=1;--c)i[c][0]=d[c],--c,i[c][0]=d[c];0===c&&(i[0][0]=d[0])}return i},globalThis.numeric=b,a.numeric=b}}(this),function(a,b){"object"==typeof exports&&void 0!==typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.PerspT=b()}(this,function(){function a(a){return Math.round(1e10*a)/1e10}function b(b,c,d){if(d){var e=c;c=b,b=e}var f,g=[b[0],b[1],1,0,0,0,-1*c[0]*b[0],-1*c[0]*b[1]],h=[0,0,0,b[0],b[1],1,-1*c[1]*b[0],-1*c[1]*b[1]],i=[b[2],b[3],1,0,0,0,-1*c[2]*b[2],-1*c[2]*b[3]],j=[0,0,0,b[2],b[3],1,-1*c[3]*b[2],-1*c[3]*b[3]],k=[b[4],b[5],1,0,0,0,-1*c[4]*b[4],-1*c[4]*b[5]],l=[0,0,0,b[4],b[5],1,-1*c[5]*b[4],-1*c[5]*b[5]],m=[b[6],b[7],1,0,0,0,-1*c[6]*b[6],-1*c[6]*b[7]],n=[0,0,0,b[6],b[7],1,-1*c[7]*b[6],-1*c[7]*b[7]],o=[g,h,i,j,k,l,m,n],p=c;try{f=numeric.inv(numeric.dotMMsmall(numeric.transpose(o),o))}catch(t){return console.log(t),[1,0,0,0,1,0,0,0]}for(var q=numeric.dotMMsmall(f,numeric.transpose(o)),r=numeric.dotMV(q,p),s=0;s<r.length;s++)r[s]=a(r[s]);return r[8]=1,r}function c(a,d){return"undefined"!=typeof window&&window===this||void 0===this?new c(a,d):(this.srcPts=a,this.dstPts=d,this.coeffs=b(this.srcPts,this.dstPts,!1),this.coeffsInv=b(this.srcPts,this.dstPts,!0),this)}return c.prototype={transform:function(a,b){var c=[];return c[0]=(this.coeffs[0]*a+this.coeffs[1]*b+this.coeffs[2])/(this.coeffs[6]*a+this.coeffs[7]*b+1),c[1]=(this.coeffs[3]*a+this.coeffs[4]*b+this.coeffs[5])/(this.coeffs[6]*a+this.coeffs[7]*b+1),c},transformInverse:function(a,b){var c=[];return c[0]=(this.coeffsInv[0]*a+this.coeffsInv[1]*b+this.coeffsInv[2])/(this.coeffsInv[6]*a+this.coeffsInv[7]*b+1),c[1]=(this.coeffsInv[3]*a+this.coeffsInv[4]*b+this.coeffsInv[5])/(this.coeffsInv[6]*a+this.coeffsInv[7]*b+1),c}},c});